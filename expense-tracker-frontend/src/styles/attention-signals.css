/**
 * Attention signals and urgency animations.
 * Pulse, shake, highlight flash, bounce, and badge animations.
 */

/* ============================================================================
   Pulse Animation (subtle opacity pulse)
   ============================================================================ */

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  will-change: opacity;
}

.pulse--fast {
  animation-duration: 1s;
}

.pulse--slow {
  animation-duration: 3s;
}

/* ============================================================================
   Shake Animation (for errors/warnings)
   ============================================================================ */

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-4px);
  }
  75% {
    transform: translateX(4px);
  }
}

.shake {
  animation: shake 0.4s cubic-bezier(0.36, 0, 0.66, -0.56);
  will-change: transform;
}

.shake--intense {
  animation: shake 0.4s cubic-bezier(0.36, 0, 0.66, -0.56) 2;
}

/* ============================================================================
   Bounce Animation (vertical bounce)
   ============================================================================ */

@keyframes bounce-vertical {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

.bounce {
  animation: bounce-vertical 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  will-change: transform;
}

.bounce--loop {
  animation: bounce-vertical 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
}

/* ============================================================================
   Highlight Flash (background color flash)
   ============================================================================ */

@keyframes highlight-flash {
  0% {
    background-color: transparent;
  }
  50% {
    background-color: rgba(16, 185, 129, 0.3);
  }
  100% {
    background-color: transparent;
  }
}

.highlight-flash {
  animation: highlight-flash 0.5s ease-out;
  will-change: background-color;
}

.highlight-flash--success {
  animation: highlight-flash 0.5s ease-out,
             (1 = {background-color: rgba(16, 185, 129, 0.3);});
}

.highlight-flash--warning {
  animation: highlight-flash 0.5s ease-out,
             (1 = {background-color: rgba(245, 158, 11, 0.3);});
}

.highlight-flash--error {
  animation: highlight-flash 0.5s ease-out,
             (1 = {background-color: rgba(220, 38, 38, 0.3);});
}

/* ============================================================================
   Attention Badge
   ============================================================================ */

.attention-badge {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  &::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    background: radial-gradient(circle, 
      rgba(220, 38, 38, 0.4) 0%, 
      rgba(220, 38, 38, 0) 100%);
    animation: attention-glow 2s ease-in-out infinite;
    will-change: box-shadow, transform;
  }

  &::after {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    background: var(--color-error, #dc2626);
    border-radius: 50%;
    right: -4px;
    top: -4px;
    animation: attention-pulse 2s ease-in-out infinite;
    box-shadow: 0 0 0 2px white;
  }
}

@keyframes attention-glow {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.6;
  }
}

@keyframes attention-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.3);
  }
}

/* ============================================================================
   Attention Signal Classes
   ============================================================================ */

.unsaved-indicator {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 2px;
    right: 2px;
    width: 8px;
    height: 8px;
    background: var(--color-warning, #f59e0b);
    border-radius: 50%;
    animation: pulse 2s ease-in-out infinite;
  }
}

.new-item {
  animation: bounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;

  &::before {
    content: 'NEW';
    position: absolute;
    top: -8px;
    right: 0;
    background: var(--color-success, #10b981);
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    font-weight: bold;
    animation: fade-out 1.5s ease-out forwards;
  }
}

@keyframes fade-out {
  0% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-10px);
  }
}

.notification-badge {
  position: relative;
  display: inline-flex;

  &::after {
    content: attr(data-count);
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--color-error, #dc2626);
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    animation: attention-pulse 2s ease-in-out infinite;
  }
}

/* ============================================================================
   Blinking Animation (for critical alerts)
   ============================================================================ */

@keyframes blink {
  0%, 49%, 100% {
    opacity: 1;
  }
  50%, 99% {
    opacity: 0.3;
  }
}

.blink {
  animation: blink 1s steps(2, start) infinite;
}

/* ============================================================================
   Accessibility: Reduced Motion
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .pulse,
  .pulse--fast,
  .pulse--slow,
  .shake,
  .shake--intense,
  .bounce,
  .bounce--loop,
  .highlight-flash,
  .highlight-flash--success,
  .highlight-flash--warning,
  .highlight-flash--error,
  .attention-badge::before,
  .attention-badge::after,
  .unsaved-indicator::before,
  .new-item,
  .new-item::before,
  .notification-badge::after,
  .blink {
    animation: none;

    &::before {
      animation: none;
    }

    &::after {
      animation: none;
    }
  }

  .attention-badge {
    &::before {
      display: none;
    }

    &::after {
      opacity: 1;
      transform: scale(1);
    }
  }

  .new-item::before {
    opacity: 1;
    transform: translateY(0);
  }
}
